#!/bin/bash

TAG="$SNAP_INSTANCE_NAME.configure"

GPIO=$(snapctl get gpio)
if [[ -n $GPIO ]] && ! [[ $GPIO =~ ^[1-9][0-9]*$ ]]; then
    logger -t $TAG --stderr "gpio: '$GPIO' is not a positive integer"
    exit 1
fi

GPIOCHIP=$(snapctl get gpiochip)
if (( GPIOCHIP != 0 && GPIOCHIP != 4 )); then
    logger -t $TAG --stderr "gpiochip: Unless that is being used for mocking, '$GPIOCHIP' is not supported; set to 0 or 4"
fi
